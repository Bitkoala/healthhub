import{d as be,u as xe,r as d,c as R,o as me,a as o,b as t,e as c,q as j,t as l,p as v,F as $,g as C,h as r,v as x,y as fe,i as V,l as I,n as ve,j as g,k as a}from"./index-B9VC-lj_.js";import{C as ge,p as ye,a as we,b as he,B as _e,c as ke,L as De,d as $e}from"./index-mDZZy21G.js";function E(){const _=new Date,i=_.getFullYear(),k=(_.getMonth()+1).toString().padStart(2,"0"),q=_.getDate().toString().padStart(2,"0");return`${i}-${k}-${q}`}function f(_){return _===null||typeof _>"u"?"":new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(_)}const Ce={class:"container mx-auto p-4 md:p-6 max-w-4xl"},Te={class:"flex items-center justify-between bg-white/80 backdrop-blur-sm p-2 rounded-xl shadow-md mb-6 border border-white/20"},Se={key:0},Ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Le={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow border"},Ue={class:"text-2xl font-bold"},je={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow border"},Ee={class:"text-2xl font-bold text-green-600"},qe={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow border"},Ne={class:"text-2xl font-bold text-red-600"},Fe={class:"md:col-span-3 bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow border"},Oe={class:"text-3xl font-bold text-blue-600"},ze={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow-md border"},Be={class:"flex justify-between items-center mb-4"},Ie={class:"space-y-2"},Pe={class:"font-semibold"},Ae={class:"mt-6 bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow-md border"},Me={class:"flex flex-wrap items-center gap-4 mb-4"},Re={class:"relative h-80"},He={key:1,class:"flex items-center justify-center h-full text-gray-500"},Ye={key:1},Ge={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow-md border"},Je={class:"flex justify-between items-center mb-4"},Ke={class:"space-y-3"},Qe={class:"font-semibold"},We={class:"text-xs text-gray-500"},Xe={key:0,class:"text-xs text-gray-500 mt-1"},Ze={class:"flex items-center gap-3"},et=["onClick"],tt={class:"mt-6 border-t pt-4"},st={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg"},nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},at=["disabled"],ot={key:0,class:"mt-4"},lt={key:0,class:"text-gray-500"},rt={key:1,class:"space-y-3 max-h-96 overflow-y-auto"},it={class:"font-semibold"},dt={class:"text-xs text-gray-500"},ut={key:0,class:"text-xs text-gray-500 mt-1"},ct={class:"flex items-center gap-3"},pt=["onClick"],bt={key:2},xt={class:"bg-white/80 backdrop-blur-sm p-4 rounded-xl shadow-md border"},mt={class:"flex justify-between items-center mb-4"},ft={class:"space-y-3"},vt={class:"flex justify-between items-start"},gt={class:"font-semibold"},yt={class:"text-xs text-gray-500"},wt={key:0,class:"text-xs text-gray-500 mt-1"},ht={class:"text-right"},_t={key:0,class:"text-xs text-orange-500"},kt={key:1,class:"text-xs text-gray-400"},Dt={class:"flex justify-end items-center gap-2 mt-2"},$t=["onClick"],Ct=["onClick"],Tt=["onClick"],St={class:"glass-card max-w-md w-full p-8 shadow-2xl relative overflow-hidden animate-slide-up"},Vt={class:"space-y-2"},Lt={class:"space-y-2"},Ut={class:"flex justify-end space-x-3 pt-4"},jt={class:"grid grid-cols-2 gap-4"},Et={class:"space-y-2"},qt={class:"space-y-2"},Nt=["value"],Ft={class:"space-y-2"},Ot={class:"grid grid-cols-2 gap-4"},zt={class:"space-y-2"},Bt={class:"space-y-2"},It={class:"space-y-2"},Pt={class:"flex justify-end space-x-3 pt-4"},At={class:"space-y-2"},Mt={class:"grid grid-cols-2 gap-4"},Rt={class:"space-y-2"},Ht={class:"space-y-2"},Yt=["value"],Gt={class:"grid grid-cols-2 gap-4"},Jt={class:"space-y-2"},Kt={class:"space-y-2"},Qt={class:"space-y-2"},Wt={class:"flex justify-end space-x-3 pt-4"},Xt={key:0,class:"glass-card max-w-lg w-full p-8 shadow-2xl relative overflow-hidden animate-slide-up"},Zt={class:"text-xl font-bold mb-6 flex items-center space-x-2"},es={key:0,class:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar"},ts={class:"space-y-1"},ss={class:"font-bold text-emerald-400 text-lg"},ns={class:"text-[10px] text-on-surface-variant/60 uppercase tracking-widest"},as={class:"flex items-center gap-4"},os={class:"text-right"},ls={class:"text-xs font-medium text-on-surface/80"},rs=["onClick"],is={key:1,class:"text-on-surface-variant/40 text-center py-12 flex flex-col items-center"},ds={class:"mt-8"},us={class:"glass-card max-w-md w-full p-8 shadow-2xl relative overflow-hidden animate-slide-up"},cs={class:"text-xl font-bold mb-6 flex items-center space-x-2"},ps={class:"p-4 rounded-2xl bg-white/5 border border-white/10 mb-6"},bs={class:"text-2xl font-black text-on-surface tracking-tighter"},xs={class:"space-y-2"},ms=["max"],fs={class:"space-y-2"},vs=["value"],gs={class:"space-y-2"},ys={class:"flex justify-end space-x-3 pt-4"},_s=be({__name:"FinanceView",setup(_){ge.register(ye,we,he,_e,ke,De);const i=xe(),k=d([]),q=d([]),P=d([]),H=d([]),h=d("dashboard"),m=d(null),N=d(!1),F=d(!1),A=d(!1),M=d(!1),T=d({account_name:"",initial_balance:0}),b=d({account_id:null,transaction_type:"expense",amount:null,category:"",notes:"",transaction_date:E()}),p=d({loan_type:"lend",person_name:"",amount:null,notes:"",loan_date:E(),account_id:null}),y=d({id:null,person_name:"",remaining_amount:0,amount:null,account_id:null,repayment_date:E()}),O=d({startDate:"",endDate:""}),z=d(null),B=d(null),L=d([]),Y=d(null),U=d({startDate:new Date(new Date().setDate(new Date().getDate()-6)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),ee={responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1},y:{stacked:!1}},plugins:{tooltip:{callbacks:{label:function(n){let e=n.dataset.label||"";return e&&(e+=": "),n.parsed.y!==null&&(e+=new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(n.parsed.y)),e}}}}},J=R(()=>k.value.reduce((n,e)=>n+Number(e.current_balance),0)),K=R(()=>P.value.filter(n=>n.loan_type==="lend"&&n.status==="unpaid").reduce((n,e)=>n+Number(e.amount),0)),Q=R(()=>P.value.filter(n=>n.loan_type==="borrow"&&n.status==="unpaid").reduce((n,e)=>n+Number(e.amount),0)),te=R(()=>J.value+K.value-Q.value),S=async()=>{try{await Promise.all([W(),se(),ne()]),Z()}finally{ve(()=>{typeof lucide<"u"&&lucide.createIcons()})}},W=async()=>{k.value=await g("/finance/accounts")},se=async()=>{const n=await g("/finance/transactions?limit=all");n?(H.value=n,q.value=n.slice(0,10)):(H.value=[],q.value=[])},ne=async()=>{P.value=await g("/finance/loans")},ae=async()=>{if(!T.value.account_name){i.showToast({message:"Ë¥¶Êà∑ÂêçÁß∞‰∏çËÉΩ‰∏∫Á©∫",type:"error"});return}await g("/finance/accounts","POST",T.value),i.showToast({message:"Ë¥¶Êà∑Â∑≤Ê∑ªÂä†"}),await W(),m.value=null,T.value={account_name:"",initial_balance:0}},oe=async()=>{if(!b.value.account_id||!b.value.amount){i.showToast({message:"Ë¥¶Êà∑ÂíåÈáëÈ¢ù‰∏∫ÂøÖÂ°´È°π",type:"error"});return}await g("/finance/transactions","POST",b.value),i.showToast({message:"‰∫§ÊòìÂ∑≤ËÆ∞ÂΩï"}),await S(),m.value=null,b.value={account_id:null,transaction_type:"expense",amount:null,category:"",notes:"",transaction_date:E()}},le=async()=>{if(!p.value.person_name||!p.value.amount||!p.value.account_id){i.showToast({message:"ÂØπÊñπÂßìÂêç„ÄÅÈáëÈ¢ùÂíåÂÖ≥ËÅîË¥¶Êà∑‰∏∫ÂøÖÂ°´È°π",type:"error"});return}await g("/finance/loans","POST",p.value),i.showToast({message:"ÂÄüË¥∑Â∑≤ËÆ∞ÂΩï"}),await S(),m.value=null,p.value={loan_type:"lend",person_name:"",amount:null,notes:"",loan_date:E(),account_id:null}},X=async n=>{if(confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÁ¨î‰∫§ÊòìÂêóÔºü
(${n.category||"‰∫§Êòì"} - ${f(n.amount)})`))try{await g(`/finance/transactions/${n.id}`,"DELETE"),i.showToast({message:"‰∫§ÊòìÂ∑≤Âà†Èô§"}),await S()}catch(e){e instanceof Error&&i.showToast({message:`Âà†Èô§Â§±Ë¥•: ${e.message}`,type:"error"})}},re=async n=>{if(confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÁ¨î‰∏é ${n.person_name} ÁöÑÂÄüË¥∑ËÆ∞ÂΩïÂêóÔºüÂÖ∂ÂÖ≥ËÅîÁöÑÊâÄÊúâËøòÊ¨æËÆ∞ÂΩï‰πü‰ºöË¢´‰∏ÄÂπ∂Âà†Èô§„ÄÇ`))try{await g(`/finance/loans/${n.id}`,"DELETE"),i.showToast({message:"ÂÄüË¥∑ËÆ∞ÂΩïÂ∑≤Âà†Èô§"}),await S()}catch(e){e instanceof Error&&i.showToast({message:`Âà†Èô§Â§±Ë¥•: ${e.message}`,type:"error"})}},ie=async n=>{B.value=n;try{L.value=await g(`/finance/loans/${n.id}/repayments`),F.value=!0}catch(e){e instanceof Error&&i.showToast({message:`Ëé∑ÂèñËøòÊ¨æÂéÜÂè≤Â§±Ë¥•: ${e.message}`,type:"error"}),L.value=[]}},de=async n=>{if(confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÁ¨î ${new Date(n.repayment_date).toLocaleDateString()} ÁöÑËøòÊ¨æËÆ∞ÂΩïÂêóÔºüÈáëÈ¢ù‰∏∫ ${f(n.amount)}„ÄÇ
Ê≠§Êìç‰Ωú‰πü‰ºöÂà†Èô§ÂÖ≥ËÅîÁöÑ‰∫§ÊòìÊòéÁªÜ„ÄÇ`)&&B.value)try{await g(`/finance/repayments/${n.id}`,"DELETE"),i.showToast({message:"ËøòÊ¨æËÆ∞ÂΩïÂ∑≤Âà†Èô§"});const e=B.value.id;await S();const s=await g(`/finance/loans/${e}/repayments`);L.value=s||[],L.value.length===0&&(F.value=!1)}catch(e){e instanceof Error&&i.showToast({message:`Âà†Èô§Â§±Ë¥•: ${e.message}`,type:"error"})}},ue=n=>{y.value={id:n.id,person_name:n.person_name,remaining_amount:n.remaining_amount,amount:null,account_id:null,repayment_date:E()},N.value=!0},ce=async()=>{const{id:n,amount:e,account_id:s,repayment_date:w}=y.value;if(!e||!s){i.showToast({message:"ËøòÊ¨æÈáëÈ¢ùÂíåË¥¶Êà∑‰∏∫ÂøÖÂ°´È°π",type:"error"});return}try{await g(`/finance/loans/${n}/repay`,"POST",{amount:e,account_id:s,repayment_date:w}),i.showToast({message:"ËøòÊ¨æÊàêÂäü"}),await S(),N.value=!1}catch(u){u instanceof Error&&i.showToast({message:`ËøòÊ¨æÂ§±Ë¥•: ${u.message}`,type:"error"})}},pe=async()=>{const{startDate:n,endDate:e}=O.value;if(!n||!e){i.showToast({message:"ËØ∑ÈÄâÊã©ÂºÄÂßãÂíåÁªìÊùüÊó•Êúü",type:"error"});return}M.value=!0;try{const s=new URLSearchParams({startDate:n,endDate:e}).toString();z.value=await g(`/finance/transactions?${s}`)}catch(s){s instanceof Error&&i.showToast({message:`Êü•ËØ¢Â§±Ë¥•: ${s.message}`,type:"error"}),z.value=[]}finally{M.value=!1}},Z=()=>{const n=new Date(U.value.startDate);n.setHours(0,0,0,0);const e=new Date(U.value.endDate);e.setHours(23,59,59,999);const s={};for(let u=new Date(n);u<=e;u.setDate(u.getDate()+1)){const D=u.toISOString().split("T")[0];s[D]={income:0,expense:0}}H.value.forEach(u=>{const D=new Date(u.transaction_date);if(D>=n&&D<=e){const G=D.toISOString().split("T")[0];s[G]&&(u.transaction_type==="income"?s[G].income+=Number(u.amount):s[G].expense+=Number(u.amount))}});const w=Object.keys(s).sort();Y.value={labels:w.map(u=>{const D=new Date(u);return`${D.getMonth()+1}/${D.getDate()}`}),datasets:[{label:"Êî∂ÂÖ•",backgroundColor:"#4ade80",data:w.map(u=>s[u].income)},{label:"ÊîØÂá∫",backgroundColor:"#f87171",data:w.map(u=>s[u].expense)}]}};return me(S),(n,e)=>(a(),o("div",Ce,[e[86]||(e[86]=t("header",{class:"mb-6"},[t("div",{class:"bg-white/80 backdrop-blur-sm px-6 py-4 rounded-xl shadow border border-white/20"},[t("h1",{class:"text-2xl font-bold"},"‰∏™‰∫∫ËÆ∞Ë¥¶"),t("p",{class:"text-gray-500 mt-1"},"Ê∏ÖÊô∞ÊéåÊè°ÊÇ®ÁöÑË¥¢Âä°Áä∂ÂÜµ")])],-1)),t("div",Te,[t("button",{onClick:e[0]||(e[0]=s=>h.value="dashboard"),class:j([{"bg-blue-500 text-white":h.value==="dashboard"},"flex-1 py-2 px-4 rounded-lg"])}," ÊÄªËßà ",2),t("button",{onClick:e[1]||(e[1]=s=>h.value="transactions"),class:j([{"bg-blue-500 text-white":h.value==="transactions"},"flex-1 py-2 px-4 rounded-lg"])}," ‰∫§ÊòìÊòéÁªÜ ",2),t("button",{onClick:e[2]||(e[2]=s=>h.value="loans"),class:j([{"bg-blue-500 text-white":h.value==="loans"},"flex-1 py-2 px-4 rounded-lg"])}," ÂÄüËøòÊ¨æ ",2)]),h.value==="dashboard"?(a(),o("div",Se,[t("div",Ve,[t("div",Le,[e[36]||(e[36]=t("p",{class:"text-sm text-gray-500"},"ÊÄªËµÑ‰∫ß",-1)),t("p",Ue,l(v(f)(J.value)),1)]),t("div",je,[e[37]||(e[37]=t("p",{class:"text-sm text-gray-500"},"ÊÄªÂÄüÂá∫",-1)),t("p",Ee,l(v(f)(K.value)),1)]),t("div",qe,[e[38]||(e[38]=t("p",{class:"text-sm text-gray-500"},"ÊÄªÂÄüÂÖ•",-1)),t("p",Ne,l(v(f)(Q.value)),1)]),t("div",Fe,[e[39]||(e[39]=t("p",{class:"text-sm text-gray-500"},"ÂáÄËµÑ‰∫ß (ÊÄªËµÑ‰∫ß + ÊÄªÂÄüÂá∫ - ÊÄªÂÄüÂÖ•)",-1)),t("p",Oe,l(v(f)(te.value)),1)])]),t("div",ze,[t("div",Be,[e[40]||(e[40]=t("h2",{class:"text-xl font-semibold"},"ÊàëÁöÑË¥¶Êà∑",-1)),t("button",{onClick:e[3]||(e[3]=s=>m.value="account"),class:"bg-blue-500 text-white py-1 px-3 rounded-lg text-sm"}," Ê∑ªÂä†Ë¥¶Êà∑ ")]),t("ul",Ie,[(a(!0),o($,null,C(k.value,s=>(a(),o("li",{key:s.id,class:"flex justify-between items-center p-2 bg-gray-50 rounded-md"},[t("span",null,l(s.account_name),1),t("span",Pe,l(v(f)(s.current_balance)),1)]))),128))])]),t("div",Ae,[e[43]||(e[43]=t("h2",{class:"text-xl font-semibold mb-2"},"Êî∂ÊîØÂõæË°®ÂàÜÊûê",-1)),t("div",Me,[t("div",null,[e[41]||(e[41]=t("label",{for:"chart-start-date",class:"text-sm font-medium text-gray-700"},"ÂºÄÂßãÊó•Êúü",-1)),r(t("input",{type:"date",id:"chart-start-date","onUpdate:modelValue":e[4]||(e[4]=s=>U.value.startDate=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[x,U.value.startDate]])]),t("div",null,[e[42]||(e[42]=t("label",{for:"chart-end-date",class:"text-sm font-medium text-gray-700"},"ÁªìÊùüÊó•Êúü",-1)),r(t("input",{type:"date",id:"chart-end-date","onUpdate:modelValue":e[5]||(e[5]=s=>U.value.endDate=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"},null,512),[[x,U.value.endDate]])]),t("div",{class:"self-end"},[t("button",{onClick:Z,class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Êõ¥Êñ∞ÂõæË°® ")])]),t("div",Re,[Y.value?(a(),fe(v($e),{key:0,data:Y.value,options:ee},null,8,["data"])):(a(),o("div",He," Âä†ËΩΩÂõæË°®Êï∞ÊçÆ‰∏≠... "))])])])):c("",!0),h.value==="transactions"?(a(),o("div",Ye,[t("div",Ge,[t("div",Je,[e[44]||(e[44]=t("h2",{class:"text-xl font-semibold"},"‰∫§ÊòìÊòéÁªÜ",-1)),t("button",{onClick:e[6]||(e[6]=s=>m.value="transaction"),class:"bg-blue-500 text-white py-1 px-3 rounded-lg text-sm"}," ËÆ∞ÂΩï‰∏ÄÁ¨î ")]),t("ul",Ke,[(a(!0),o($,null,C(q.value,s=>(a(),o("li",{key:s.id,class:"flex justify-between items-center p-3 bg-gray-50 rounded-md"},[t("div",null,[t("p",Qe,l(s.category||(s.transaction_type==="income"?"Êî∂ÂÖ•":"ÊîØÂá∫")),1),t("p",We,l(new Date(s.transaction_date).toLocaleDateString())+" ¬∑ "+l(s.account_name),1),s.notes?(a(),o("p",Xe,"Â§áÊ≥®: "+l(s.notes),1)):c("",!0)]),t("div",Ze,[t("p",{class:j(["font-bold text-right",s.transaction_type==="income"?"text-green-600":"text-red-600"])},l(s.transaction_type==="income"?"+":"-")+" "+l(v(f)(s.amount)),3),t("button",{onClick:w=>X(s),class:"text-gray-400 hover:text-red-500 p-1 rounded-full"},[...e[45]||(e[45]=[t("i",{"data-lucide":"trash-2",class:"w-4 h-4"},null,-1)])],8,et)])]))),128))]),t("div",tt,[t("button",{onClick:e[7]||(e[7]=s=>A.value=!A.value),class:"text-sm text-blue-600 hover:underline"},l(A.value?"Êî∂Ëµ∑Êü•ËØ¢":"Êü•ËØ¢ÂéÜÂè≤ËÆ∞ÂΩï"),1),A.value?(a(),o("div",st,[t("div",nt,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs text-gray-600"},"ÂºÄÂßãÊó•Êúü",-1)),r(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>O.value.startDate=s),class:"w-full p-2 border rounded-md text-sm"},null,512),[[x,O.value.startDate]])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-xs text-gray-600"},"ÁªìÊùüÊó•Êúü",-1)),r(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>O.value.endDate=s),class:"w-full p-2 border rounded-md text-sm"},null,512),[[x,O.value.endDate]])]),t("button",{onClick:pe,disabled:M.value,class:"bg-blue-500 text-white py-2 px-4 rounded-md text-sm disabled:bg-gray-400"},l(M.value?"Êü•ËØ¢‰∏≠...":"Êü•ËØ¢"),9,at)]),z.value?(a(),o("div",ot,[e[49]||(e[49]=t("h3",{class:"text-lg font-semibold mb-2"},"Êü•ËØ¢ÁªìÊûú",-1)),z.value.length===0?(a(),o("p",lt,"Âú®ÈÄâÂÆöÊó•ÊúüËåÉÂõ¥ÂÜÖÊ≤°ÊúâÊâæÂà∞‰∫§ÊòìËÆ∞ÂΩï„ÄÇ")):(a(),o("ul",rt,[(a(!0),o($,null,C(z.value,s=>(a(),o("li",{key:`search-${s.id}`,class:"flex justify-between items-center p-3 bg-white rounded-md shadow-sm"},[t("div",null,[t("p",it,l(s.category||(s.transaction_type==="income"?"Êî∂ÂÖ•":"ÊîØÂá∫")),1),t("p",dt,l(new Date(s.transaction_date).toLocaleDateString())+" ¬∑ "+l(s.account_name),1),s.notes?(a(),o("p",ut,"Â§áÊ≥®: "+l(s.notes),1)):c("",!0)]),t("div",ct,[t("p",{class:j(["font-bold text-right",s.transaction_type==="income"?"text-green-600":"text-red-600"])},l(s.transaction_type==="income"?"+":"-")+" "+l(v(f)(s.amount)),3),t("button",{onClick:w=>X(s),class:"text-gray-400 hover:text-red-500 p-1 rounded-full"},[...e[48]||(e[48]=[t("i",{"data-lucide":"trash-2",class:"w-4 h-4"},null,-1)])],8,pt)])]))),128))]))])):c("",!0)])):c("",!0)])])])):c("",!0),h.value==="loans"?(a(),o("div",bt,[t("div",xt,[t("div",mt,[e[50]||(e[50]=t("h2",{class:"text-xl font-semibold"},"ÂÄüËøòÊ¨æ",-1)),t("button",{onClick:e[10]||(e[10]=s=>m.value="loan"),class:"bg-blue-500 text-white py-1 px-3 rounded-lg text-sm"}," Ê∑ªÂä†ËÆ∞ÂΩï ")]),t("ul",ft,[(a(!0),o($,null,C(P.value,s=>(a(),o("li",{key:s.id,class:"p-3 bg-gray-50 rounded-md"},[t("div",vt,[t("div",null,[t("p",gt,l(s.person_name),1),t("p",yt,l(new Date(s.loan_date).toLocaleDateString()),1),s.notes?(a(),o("p",wt,"Â§áÊ≥®: "+l(s.notes),1)):c("",!0)]),t("div",ht,[t("p",{class:j(["font-bold",s.loan_type==="lend"?"text-green-600":"text-red-600"])},l(s.loan_type==="lend"?"ÂÄüÂá∫":"ÂÄüÂÖ•")+" "+l(v(f)(s.amount)),3),s.status==="unpaid"?(a(),o("div",_t,[t("p",null,"Â∑≤Ëøò: "+l(v(f)(s.total_repaid)),1),t("p",null,"Ââ©‰Ωô: "+l(v(f)(s.remaining_amount)),1)])):s.repayment_date?(a(),o("p",kt,l(`Â∑≤‰∫é ${new Date(s.repayment_date).toLocaleDateString()} ËøòÊ∏Ö`),1)):c("",!0)])]),t("div",Dt,[s.status==="unpaid"&&s.total_repaid>0?(a(),o("button",{key:0,onClick:w=>ie(s),class:"text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 py-1 px-3 rounded-md"}," ËøòÊ¨æÂéÜÂè≤ ",8,$t)):c("",!0),s.status==="unpaid"?(a(),o("button",{key:1,onClick:w=>ue(s),class:"text-xs bg-blue-100 text-blue-700 hover:bg-blue-200 py-1 px-3 rounded-md"}," ËøòÊ¨æ ",8,Ct)):c("",!0),t("button",{onClick:w=>re(s),class:"text-xs bg-red-100 text-red-700 hover:bg-red-200 py-1 px-3 rounded-md"}," Âà†Èô§ ",8,Tt)])]))),128))])])])):c("",!0),m.value?(a(),o("div",{key:3,onClick:e[28]||(e[28]=V(s=>m.value=null,["self"])),class:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fade-in"},[t("div",St,[m.value==="account"?(a(),o("form",{key:0,onSubmit:V(ae,["prevent"]),class:"space-y-6"},[e[54]||(e[54]=t("h2",{class:"text-xl font-bold mb-6 flex items-center space-x-2"},[t("i",{"data-lucide":"plus-circle",class:"w-5 h-5 text-blue-500"}),t("span",null,"Ê∑ªÂä†Êñ∞Ë¥¶Êà∑")],-1)),t("div",Vt,[e[51]||(e[51]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Ë¥¶Êà∑ÂêçÁß∞",-1)),r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>T.value.account_name=s),type:"text",required:"",placeholder:"‰æãÂ¶ÇÔºöÊîØ‰ªòÂÆù„ÄÅÊãõË°åÂç°",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,T.value.account_name]])]),t("div",Lt,[e[52]||(e[52]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂàùÂßã‰ΩôÈ¢ù",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>T.value.initial_balance=s),type:"number",step:"0.01",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,T.value.initial_balance,void 0,{number:!0}]])]),t("div",Ut,[t("button",{type:"button",onClick:e[13]||(e[13]=s=>m.value=null),class:"py-3 px-6 rounded-2xl bg-white/5 hover:bg-white/10 font-bold transition-all"}," ÂèñÊ∂à "),e[53]||(e[53]=t("button",{type:"submit",class:"py-3 px-6 rounded-2xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-500/20 transition-all active:scale-95"}," ‰øùÂ≠òË¥¶Êà∑ ",-1))])],32)):c("",!0),m.value==="transaction"?(a(),o("form",{key:1,onSubmit:V(oe,["prevent"]),class:"space-y-4"},[e[64]||(e[64]=t("h2",{class:"text-xl font-bold mb-4 flex items-center space-x-2"},[t("i",{"data-lucide":"receipt",class:"w-5 h-5 text-emerald-500"}),t("span",null,"ËÆ∞ÂΩï‰∏ÄÁ¨î‰∫§Êòì")],-1)),t("div",jt,[t("div",Et,[e[56]||(e[56]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Ë¥¶Âä°Á±ªÂûã",-1)),r(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>b.value.transaction_type=s),class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all appearance-none"},[...e[55]||(e[55]=[t("option",{value:"expense"},"ÊîØÂá∫ üí∏",-1),t("option",{value:"income"},"Êî∂ÂÖ• üí∞",-1)])],512),[[I,b.value.transaction_type]])]),t("div",qt,[e[58]||(e[58]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂÖ≥ËÅîË¥¶Êà∑",-1)),r(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>b.value.account_id=s),required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all appearance-none"},[e[57]||(e[57]=t("option",{value:null,disabled:""},"ËØ∑ÈÄâÊã©",-1)),(a(!0),o($,null,C(k.value,s=>(a(),o("option",{key:s.id,value:s.id},l(s.account_name),9,Nt))),128))],512),[[I,b.value.account_id,void 0,{number:!0}]])])]),t("div",Ft,[e[59]||(e[59]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"‰∫§ÊòìÈáëÈ¢ù",-1)),r(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>b.value.amount=s),type:"number",step:"0.01",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm font-bold text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,b.value.amount,void 0,{number:!0}]])]),t("div",Ot,[t("div",zt,[e[60]||(e[60]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂàÜÁ±ª",-1)),r(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>b.value.category=s),type:"text",placeholder:"‰æãÂ¶ÇÔºöÈ§êÈ•Æ„ÄÅÊàøÁßü",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,b.value.category]])]),t("div",Bt,[e[61]||(e[61]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Êó•Êúü",-1)),r(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>b.value.transaction_date=s),type:"date",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,b.value.transaction_date]])])]),t("div",It,[e[62]||(e[62]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Â§áÊ≥®",-1)),r(t("textarea",{"onUpdate:modelValue":e[19]||(e[19]=s=>b.value.notes=s),rows:"2",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all resize-none"},null,512),[[x,b.value.notes]])]),t("div",Pt,[t("button",{type:"button",onClick:e[20]||(e[20]=s=>m.value=null),class:"py-3 px-6 rounded-2xl bg-white/5 hover:bg-white/10 font-bold transition-all"}," ÂèñÊ∂à "),e[63]||(e[63]=t("button",{type:"submit",class:"py-3 px-6 rounded-2xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold shadow-lg shadow-emerald-500/20 transition-all active:scale-95"}," Á´ãÂç≥ËÆ∞Ë¥¶ ",-1))])],32)):c("",!0),m.value==="loan"?(a(),o("form",{key:2,onSubmit:V(le,["prevent"]),class:"space-y-4"},[e[74]||(e[74]=t("h2",{class:"text-xl font-bold mb-4 flex items-center space-x-2"},[t("i",{"data-lucide":"hand-metal",class:"w-5 h-5 text-orange-500"}),t("span",null,"ËÆ∞ÂΩï‰∏ÄÁ¨îÂÄüË¥∑")],-1)),t("div",At,[e[66]||(e[66]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂÄüË¥∑Ê®°Âºè",-1)),r(t("select",{"onUpdate:modelValue":e[21]||(e[21]=s=>p.value.loan_type=s),class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all appearance-none"},[...e[65]||(e[65]=[t("option",{value:"lend"},"ÂÄüÂá∫ÁªôÂà´‰∫∫ ‚§¥Ô∏è",-1),t("option",{value:"borrow"},"‰ªéÂà´‰∫∫Â§ÑÂÄüÂÖ• ‚§µÔ∏è",-1)])],512),[[I,p.value.loan_type]])]),t("div",Mt,[t("div",Rt,[e[67]||(e[67]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂØπÊñπÂßìÂêç",-1)),r(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>p.value.person_name=s),type:"text",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,p.value.person_name]])]),t("div",Ht,[e[69]||(e[69]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂÖ≥ËÅîË¥¶Êà∑",-1)),r(t("select",{"onUpdate:modelValue":e[23]||(e[23]=s=>p.value.account_id=s),required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface whitespace-nowrap overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all appearance-none"},[e[68]||(e[68]=t("option",{value:null,disabled:""},"ÈÄâÊã©Ë¥¶Êà∑",-1)),(a(!0),o($,null,C(k.value,s=>(a(),o("option",{key:s.id,value:s.id},l(s.account_name),9,Yt))),128))],512),[[I,p.value.account_id,void 0,{number:!0}]])])]),t("div",Gt,[t("div",Jt,[e[70]||(e[70]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÂÄüË¥∑ÈáëÈ¢ù",-1)),r(t("input",{"onUpdate:modelValue":e[24]||(e[24]=s=>p.value.amount=s),type:"number",step:"0.01",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,p.value.amount,void 0,{number:!0}]])]),t("div",Kt,[e[71]||(e[71]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Êó•Êúü",-1)),r(t("input",{"onUpdate:modelValue":e[25]||(e[25]=s=>p.value.loan_date=s),type:"date",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,p.value.loan_date]])])]),t("div",Qt,[e[72]||(e[72]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ÁªÜËäÇËØ¥Êòé",-1)),r(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=s=>p.value.notes=s),rows:"2",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all resize-none"},null,512),[[x,p.value.notes]])]),t("div",Wt,[t("button",{type:"button",onClick:e[27]||(e[27]=s=>m.value=null),class:"py-3 px-6 rounded-2xl bg-white/5 hover:bg-white/10 font-bold transition-all"}," ÂèñÊ∂à "),e[73]||(e[73]=t("button",{type:"submit",class:"py-3 px-6 rounded-2xl bg-orange-600 hover:bg-orange-700 text-white font-bold shadow-lg shadow-orange-500/20 transition-all active:scale-95"}," Á°ÆËÆ§ËÆ∞ÂΩï ",-1))])],32)):c("",!0)])])):c("",!0),F.value?(a(),o("div",{key:4,onClick:e[30]||(e[30]=V(s=>F.value=!1,["self"])),class:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fade-in"},[B.value?(a(),o("div",Xt,[t("h3",Zt,[e[75]||(e[75]=t("i",{"data-lucide":"history",class:"w-5 h-5 text-blue-500"},null,-1)),t("span",null,"‚Äú"+l(B.value.person_name)+"‚ÄùÁöÑËøòÊ¨æÂéÜÂè≤",1)]),L.value.length>0?(a(),o("div",es,[(a(!0),o($,null,C(L.value,s=>(a(),o("div",{key:s.id,class:"flex justify-between items-center p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-colors"},[t("div",ts,[t("p",ss,l(v(f)(s.amount)),1),t("p",ns,"Êó•Êúü: "+l(new Date(s.repayment_date).toLocaleDateString()),1)]),t("div",as,[t("div",os,[e[76]||(e[76]=t("p",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/40"},"Ë¥¶Êà∑",-1)),t("p",ls,l(s.account_name),1)]),t("button",{onClick:w=>de(s),class:"p-2 text-red-400/60 hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-all"},[...e[77]||(e[77]=[t("i",{"data-lucide":"trash-2",class:"w-4 h-4"},null,-1)])],8,rs)])]))),128))])):(a(),o("div",is,[...e[78]||(e[78]=[t("i",{"data-lucide":"inbox",class:"w-12 h-12 mb-2 opacity-20"},null,-1),t("p",{class:"text-sm"},"ÊöÇÊó†ËøòÊ¨æÂéÜÂè≤ËÆ∞ÂΩï",-1)])])),t("div",ds,[t("button",{onClick:e[29]||(e[29]=s=>F.value=!1),class:"w-full py-3 bg-white/10 hover:bg-white/20 text-on-surface font-bold rounded-2xl transition-all"},"ÂÖ≥Èó≠")])])):c("",!0)])):c("",!0),N.value?(a(),o("div",{key:5,onClick:e[35]||(e[35]=V(s=>N.value=!1,["self"])),class:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fade-in"},[t("div",us,[t("form",{onSubmit:V(ce,["prevent"]),class:"space-y-6"},[t("h2",cs,[e[79]||(e[79]=t("i",{"data-lucide":"badge-check",class:"w-5 h-5 text-blue-500"},null,-1)),t("span",null,'‰∏∫ "'+l(y.value.person_name)+'" ËøòÊ¨æ',1)]),t("div",ps,[e[80]||(e[80]=t("p",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 mb-1 leading-none"},"Ââ©‰ΩôÊú™ËøòÈáëÈ¢ù",-1)),t("p",bs,l(v(f)(y.value.remaining_amount)),1)]),t("div",xs,[e[81]||(e[81]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Êú¨Ê¨°ËøòÊ¨æÈáëÈ¢ù",-1)),r(t("input",{"onUpdate:modelValue":e[31]||(e[31]=s=>y.value.amount=s),type:"number",step:"0.01",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm font-bold text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all font-mono",max:y.value.remaining_amount},null,8,ms),[[x,y.value.amount,void 0,{number:!0}]])]),t("div",fs,[e[83]||(e[83]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"Êî∂/‰ªòÊ¨æË¥¶Êà∑",-1)),r(t("select",{"onUpdate:modelValue":e[32]||(e[32]=s=>y.value.account_id=s),required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all appearance-none"},[e[82]||(e[82]=t("option",{value:null,disabled:""},"ÈÄâÊã©Ë¥¶Êà∑",-1)),(a(!0),o($,null,C(k.value,s=>(a(),o("option",{key:s.id,value:s.id},l(s.account_name),9,vs))),128))],512),[[I,y.value.account_id,void 0,{number:!0}]])]),t("div",gs,[e[84]||(e[84]=t("label",{class:"text-[10px] font-bold uppercase tracking-widest text-on-surface-variant/60 ml-1"},"ËøòÊ¨æÊó•Êúü",-1)),r(t("input",{"onUpdate:modelValue":e[33]||(e[33]=s=>y.value.repayment_date=s),type:"date",required:"",class:"w-full bg-white/5 border border-white/10 rounded-2xl py-3 px-4 text-sm text-on-surface focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"},null,512),[[x,y.value.repayment_date]])]),t("div",ys,[t("button",{type:"button",onClick:e[34]||(e[34]=s=>N.value=!1),class:"py-3 px-6 rounded-2xl bg-white/5 hover:bg-white/10 font-bold transition-all"}," ÂèñÊ∂à "),e[85]||(e[85]=t("button",{type:"submit",class:"py-3 px-6 rounded-2xl bg-blue-600 hover:bg-blue-700 text-white font-bold shadow-lg shadow-blue-500/20 transition-all active:scale-95"}," Á°ÆËÆ§Êèê‰∫§ ",-1))])],32)])])):c("",!0)]))}});export{_s as default};
