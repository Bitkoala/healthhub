import{d as F,a as i,u as P,o as G,p as b,n as p,w as S,b as l,e,s as R,x as I,i as T,f as d,l as j,F as f,h as C,v as N,m as U,E as A,T as J,t as r,k as Q,g as L,q as a,D as W}from"./index-JbFNVPXE.js";const X={class:"container mx-auto p-4 md:p-6 max-w-4xl min-h-screen pb-24"},Y={class:"mb-8 animate-fade-in"},Z={class:"glass-card p-6 flex flex-col md:flex-row justify-between items-center gap-4"},ee={class:"flex bg-gray-100 dark:bg-white/5 p-1 rounded-2xl border border-white/10"},te={class:"space-y-6 animate-card-in"},se={class:"glass-card p-6"},le={class:"flex flex-col md:flex-row gap-4"},ae=["value"],oe=["value"],ne={class:"flex-1 relative"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={key:0,class:"col-span-full py-20 flex flex-col items-center"},re=["onClick"],ue={class:"flex justify-between items-start"},ce={class:"text-[10px] uppercase font-bold text-blue-500 tracking-wider mb-1 block"},ve={class:"font-bold text-lg group-hover:text-blue-500 transition-colors"},pe={class:"text-xs text-on-surface-variant/60 mt-1 line-clamp-2 italic leading-relaxed"},fe={key:0,class:"col-span-full py-20 flex flex-col items-center"},xe=["onClick"],ge={class:"flex items-center space-x-2 mb-2"},be={class:"text-[10px] bg-indigo-500/10 text-indigo-500 px-2 py-0.5 rounded-full font-bold"},ye={class:"text-[10px] opacity-40"},he={class:"font-bold group-hover:text-indigo-500 transition-colors line-clamp-1"},me={class:"text-xs text-on-surface-variant/60 mt-2 line-clamp-3 leading-loose"},we={key:2,class:"col-span-full py-32 flex flex-col items-center opacity-20"},ke=["data-lucide"],_e={class:"bg-surface dark:bg-slate-900 w-full max-w-2xl h-[90vh] md:h-auto md:max-h-[85vh] rounded-t-[2.5rem] md:rounded-[2rem] shadow-2xl overflow-hidden flex flex-col animate-slide-up"},Te={class:"p-6 md:p-8 flex justify-between items-center border-b border-gray-100 dark:border-white/5"},Ce={class:"text-xl font-bold italic"},Le={class:"flex-1 overflow-y-auto p-6 md:p-8 space-y-6 custom-scrollbar pb-20"},De={key:0,class:"flex flex-col items-center py-20"},Me={key:1,class:"space-y-6"},$e={key:0,class:"space-y-4"},He={class:"text-3xl font-black text-blue-600"},Ke={class:"text-sm opacity-60 leading-relaxed bg-blue-50 dark:bg-blue-900/10 p-4 rounded-2xl border-l-4 border-blue-500"},Ve={key:0,class:"space-y-2"},Se=["innerHTML"],Ie={key:1,class:"space-y-2"},je=["innerHTML"],Ne={key:2,class:"space-y-2"},Ue=["innerHTML"],Be={key:3,class:"space-y-2"},Oe=["innerHTML"],qe={key:1,class:"space-y-4"},ze={class:"text-2xl font-bold text-indigo-600"},Ee={class:"flex items-center space-x-4 text-xs opacity-40"},Fe=["innerHTML"],Pe={class:"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-slate-800/50"},Ge=F({__name:"DiscoveryView",setup(Re){const u=i("disease"),v=P(),K=i([]),y=i(""),D=i(""),h=i([]),m=i(!1),V=i([]),w=i(""),M=i(""),k=i([]),_=i(!1),c=i(!1),x=i("disease"),o=i(null),g=i(!1);G(()=>{B(),q(),b(()=>{typeof lucide<"u"&&lucide.createIcons()})});const B=async()=>{try{const n=await p("/health-info/disease/categories");K.value=n.list||[]}catch(n){console.error(n)}},$=async()=>{m.value=!0;try{const n=await p("/health-info/disease/list","POST",{key:D.value,classifyId:y.value});h.value=n.list||[],h.value.length===0&&v.showToast({message:"未找到相关疾病",type:"warning"}),b(()=>{typeof lucide<"u"&&lucide.createIcons()})}catch{v.showToast({message:"搜索失败",type:"error"})}finally{m.value=!1}},O=async n=>{g.value=!0,x.value="disease",c.value=!0,o.value=null;try{const t=await p(`/health-info/disease/detail/${n}`);o.value=t.item,b(()=>{typeof lucide<"u"&&lucide.createIcons()})}catch{v.showToast({message:"加载详情失败",type:"error"}),c.value=!1}finally{g.value=!1}},q=async()=>{try{const n=await p("/health-info/knowledge/categories");V.value=n.list||[]}catch(n){console.error(n)}},H=async()=>{_.value=!0;try{const n=await p("/health-info/knowledge/search","POST",{key:M.value,tid:w.value});k.value=n.pagebean?.contentlist||[],k.value.length===0&&v.showToast({message:"未找到相关知识",type:"warning"}),b(()=>{typeof lucide<"u"&&lucide.createIcons()})}catch{v.showToast({message:"搜索失败",type:"error"})}finally{_.value=!1}},z=async n=>{g.value=!0,x.value="knowledge",c.value=!0,o.value=null;try{const t=await p(`/health-info/knowledge/detail/${n}`);o.value=t.item,b(()=>{typeof lucide<"u"&&lucide.createIcons()})}catch{v.showToast({message:"加载详情失败",type:"error"}),c.value=!1}finally{g.value=!1}};return S(y,()=>{u.value==="disease"&&$()}),S(w,()=>{u.value==="knowledge"&&H()}),(n,t)=>(a(),l("div",X,[e("header",Y,[e("div",Z,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"},"发现中心"),e("p",{class:"text-on-surface-variant/60 text-sm mt-1"},"探索疾病百科与健康生活知识")],-1)),e("div",ee,[e("button",{onClick:t[0]||(t[0]=s=>u.value="disease"),class:I(["px-6 py-2 rounded-xl text-sm font-bold transition-all",u.value==="disease"?"bg-white dark:bg-blue-600 text-blue-600 dark:text-white shadow-md":"text-gray-500 hover:text-gray-700"])}," 疾病查询 ",2),e("button",{onClick:t[1]||(t[1]=s=>u.value="knowledge"),class:I(["px-6 py-2 rounded-xl text-sm font-bold transition-all",u.value==="knowledge"?"bg-white dark:bg-blue-600 text-blue-600 dark:text-white shadow-md":"text-gray-500 hover:text-gray-700"])}," 健康知识 ",2)])])]),e("main",te,[e("section",se,[e("div",le,[u.value==="disease"?T((a(),l("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"md:w-48 px-4 py-3 bg-white/5 border border-white/10 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20"},[t[13]||(t[13]=e("option",{value:""},"全部类别",-1)),(a(!0),l(f,null,C(K.value,s=>(a(),l("option",{key:s.id,value:s.id},r(s.name),9,ae))),128))],512)),[[j,y.value]]):d("",!0),u.value==="knowledge"?T((a(),l("select",{key:1,"onUpdate:modelValue":t[3]||(t[3]=s=>w.value=s),class:"md:w-48 px-4 py-3 bg-white/5 border border-white/10 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20"},[t[14]||(t[14]=e("option",{value:""},"全部知识",-1)),(a(!0),l(f,null,C(V.value,s=>(a(),l("option",{key:s.id,value:s.id},r(s.name),9,oe))),128))],512)),[[j,w.value]]):d("",!0),e("div",ne,[u.value==="disease"?T((a(),l("input",{key:0,type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>D.value=s),placeholder:"搜索疾病名称、症状...",class:"w-full px-12 py-3 bg-white/5 border border-white/10 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",onKeyup:t[5]||(t[5]=U(s=>$(),["enter"]))},null,544)),[[N,D.value]]):T((a(),l("input",{key:1,type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>M.value=s),placeholder:"搜索健康知识关键词...",class:"w-full px-12 py-3 bg-white/5 border border-white/10 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none",onKeyup:t[7]||(t[7]=U(s=>H(),["enter"]))},null,544)),[[N,M.value]]),t[15]||(t[15]=e("i",{"data-lucide":"search",class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 opacity-40"},null,-1)),e("button",{onClick:t[8]||(t[8]=s=>u.value==="disease"?$():H()),class:"absolute right-2 top-1/2 -translate-y-1/2 bg-blue-600 text-white px-4 py-1.5 rounded-xl text-xs font-bold shadow-lg hover:shadow-blue-500/40 transition-all"}," GO ")])])]),e("section",ie,[u.value==="disease"?(a(),l(f,{key:0},[m.value?(a(),l("div",de,[...t[16]||(t[16]=[e("div",{class:"w-10 h-10 border-4 border-blue-600/20 border-t-blue-600 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-sm opacity-50"},"正在检索医学库...",-1)])])):d("",!0),(a(!0),l(f,null,C(h.value,s=>(a(),l("div",{key:s.id,class:"glass-card p-5 hover:bg-white/10 hover:border-blue-500/30 transition-all cursor-pointer group",onClick:E=>O(s.id)},[e("div",ue,[e("div",null,[e("span",ce,r(s.categoryName||"普通疾病"),1),e("h3",ve,r(s.name),1),e("p",pe,r(s.summary||"点击查看诊疗详情内容..."),1)]),t[17]||(t[17]=e("i",{"data-lucide":"chevron-right",class:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"},null,-1))])],8,re))),128))],64)):d("",!0),u.value==="knowledge"?(a(),l(f,{key:1},[_.value?(a(),l("div",fe,[...t[18]||(t[18]=[e("div",{class:"w-10 h-10 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"text-sm opacity-50"},"正在为您获取健康科普...",-1)])])):d("",!0),(a(!0),l(f,null,C(k.value,s=>(a(),l("div",{key:s.id,class:"glass-card p-5 hover:bg-white/10 hover:border-indigo-500/30 transition-all cursor-pointer group flex flex-col justify-between",onClick:E=>z(s.id||s.link)},[e("div",null,[e("div",ge,[e("span",be,r(s.tname),1),e("span",ye,r(s.time),1)]),e("h3",he,r(s.title),1),e("p",me,r(s.intro),1)]),t[19]||(t[19]=e("div",{class:"mt-4 flex items-center text-xs font-bold text-indigo-500"},[e("span",null,"阅读详情"),e("i",{"data-lucide":"arrow-right",class:"w-3 h-3 ml-1 group-hover:translate-x-1 transition-transform"})],-1))],8,xe))),128))],64)):d("",!0),(u.value==="disease"?h.value.length===0&&!m.value:k.value.length===0&&!_.value)?(a(),l("div",we,[e("i",{"data-lucide":u.value==="disease"?"shield-plus":"book-open",class:"w-20 h-20 mb-4"},null,8,ke),t[20]||(t[20]=e("p",{class:"text-lg font-bold"},"开始您的探索之旅",-1))])):d("",!0)])]),R(J,{name:"fade-slide"},{default:A(()=>[c.value?(a(),l("div",{key:0,class:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-md flex items-end md:items-center justify-center p-0 md:p-4 overflow-hidden",onClick:t[11]||(t[11]=Q(s=>c.value=!1,["self"]))},[e("div",_e,[e("div",Te,[e("h2",Ce,r(x.value==="disease"?"疾病详情参考":"健康科普文章"),1),e("button",{onClick:t[9]||(t[9]=s=>c.value=!1),class:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors"},[...t[21]||(t[21]=[e("i",{"data-lucide":"x",class:"w-6 h-6"},null,-1)])])]),e("div",Le,[g.value?(a(),l("div",De,[...t[22]||(t[22]=[e("div",{class:"w-12 h-12 border-4 border-blue-600/10 border-t-blue-600 rounded-full animate-spin mb-4"},null,-1),e("p",{class:"italic opacity-50"},"正在检索专家库内容...",-1)])])):o.value?(a(),l("div",Me,[x.value==="disease"?(a(),l("div",$e,[e("h1",He,r(o.value.name),1),e("p",Ke,r(o.value.summary),1),o.value.cause?(a(),l("div",Ve,[t[23]||(t[23]=e("h4",{class:"text-lg font-bold flex items-center"},[e("i",{"data-lucide":"activity",class:"w-5 h-5 mr-2 text-red-500"}),L(" 病因")],-1)),e("p",{class:"text-sm leading-loose opacity-80",innerHTML:o.value.cause},null,8,Se)])):d("",!0),o.value.symptom?(a(),l("div",Ie,[t[24]||(t[24]=e("h4",{class:"text-lg font-bold flex items-center"},[e("i",{"data-lucide":"thermometer",class:"w-5 h-5 mr-2 text-orange-500"}),L(" 描述症状")],-1)),e("p",{class:"text-sm leading-loose opacity-80",innerHTML:o.value.symptom},null,8,je)])):d("",!0),o.value.check?(a(),l("div",Ne,[t[25]||(t[25]=e("h4",{class:"text-lg font-bold flex items-center"},[e("i",{"data-lucide":"microscope",class:"w-5 h-5 mr-2 text-green-500"}),L(" 检查")],-1)),e("p",{class:"text-sm leading-loose opacity-80",innerHTML:o.value.check},null,8,Ue)])):d("",!0),o.value.treat?(a(),l("div",Be,[t[26]||(t[26]=e("h4",{class:"text-lg font-bold flex items-center"},[e("i",{"data-lucide":"pill",class:"w-5 h-5 mr-2 text-indigo-500"}),L(" 治疗参考")],-1)),e("p",{class:"text-sm leading-loose opacity-80",innerHTML:o.value.treat},null,8,Oe)])):d("",!0)])):d("",!0),x.value==="knowledge"?(a(),l("div",qe,[e("h1",ze,r(o.value.title),1),e("div",Ee,[e("span",null,"分类: "+r(o.value.tname),1),e("span",null,"发布: "+r(o.value.time),1)]),e("div",{class:"prose dark:prose-invert max-w-none text-sm leading-loose opacity-80",innerHTML:o.value.content},null,8,Fe)])):d("",!0)])):d("",!0)]),e("div",Pe,[e("button",{onClick:t[10]||(t[10]=s=>c.value=!1),class:"w-full py-4 bg-gray-800 text-white font-bold rounded-2xl hover:bg-black transition-all shadow-xl"}," 阅读完毕 ")])])])):d("",!0)]),_:1})]))}}),Je=W(Ge,[["__scopeId","data-v-8e901b82"]]);export{Je as default};
